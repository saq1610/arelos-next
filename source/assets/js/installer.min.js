/* globals Nanobar, Postleaf */
$(function(){"use strict";var a=new Nanobar;$("#installer-form").on("submit",function(e){var n=this,t=$(n).attr("action");e.preventDefault(),a.go(50),$.ajax({url:t,type:"POST",data:$(n).serialize()}).done(function(a){a.success&&(location.href=a.redirect),a.invalid&&a.invalid.length&&Postleaf.highlightErrors(n,a.invalid),a.message&&$.alertable.alert(a.message,{ok:"OK",cancel:"Cancel"})}).always(function(){a.go(100)})}),$("#username").on("change",function(){$(this).val(Postleaf.slug($(this).val()))}),$("#db-prefix").on("change",function(){$(this).val($(this).val().replace(/[^A-Za-z_-]/g,"_"))})});